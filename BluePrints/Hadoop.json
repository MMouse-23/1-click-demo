{"status":{},"contains_secrets":false,"product_version":"3.0.0.0","spec":{"description":"* [Hadoop Master Name Node Dashboard](http:\/\/@@{Hadoop_Master.address}@@:50070) \n* [Hadoop Master Data Node Dashboard](http:\/\/@@{Hadoop_Master.address}@@:8088)","resources":{"client_attrs":{"301c13fd-6c1c-48eb-ac41-f3dd5d5374be":{"y":-661.2534713825,"x":-47.852973246},"4325f182-f096-46f5-8c97-ea7b482b416b":{"y":-666.9198330843,"x":428.1019595442},"9246331e-c5bd-4eaf-bd8a-e330cfebb501":{"y":-661.2534713825,"x":-47.852973246},"1283216c-ebb7-4f84-8e8f-83caea589ef2":{"y":-666.9198330843,"x":428.1019595442},"13ae057e-f714-46b2-9ce7-8b52b1fec79a":{"y":-661.2534713825,"x":-47.852973246},"aa03378f-4072-4519-8179-e0dc565965d5":{"y":-666.9198330843,"x":428.1019595442},"e9a8065b_deployment":{"y":-666.9198330843,"x":428.1019595442},"c3f19ad2-f02e-4407-bf60-7fe37a3d59a3":{"y":-661.2534713825,"x":-47.852973246},"None":{"y":-80,"x":420},"2cfc9bc0-329f-4537-8ca8-90ffbd72fad8":{"y":-666.9198330843,"x":428.1019595442},"31148de9_deployment":{"y":-661.2534713825,"x":-47.852973246}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ConfigureMaster"}],"name":"e2a56699_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ConfigureMaster","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n##############################################\n# Name        : Hadoop_Master_Configure.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to configure Hadoop master with slave details\n# Compatibility : Centos 6, 7\n##############################################\n\nsudo cp -r \/etc\/hadoop\/conf.empty \/etc\/hadoop\/conf.my_cluster\nsudo alternatives --install \/etc\/hadoop\/conf hadoop-conf \/etc\/hadoop\/conf.my_cluster 50\nsudo alternatives --set hadoop-conf \/etc\/hadoop\/conf.my_cluster\nsudo mkdir -p \/data\/1\/dfs\/nn \/nfsmount\/dfs\/nn\nsudo chown -R hdfs:hdfs \/data\/1\/dfs\/nn \/nfsmount\/dfs\/nn\nsudo chmod 700 \/data\/1\/dfs\/nn \/nfsmount\/dfs\/nn\nsudo chmod go-rx \/data\/1\/dfs\/nn \/nfsmount\/dfs\/nn\n\nsudo mv \/etc\/hadoop\/conf\/hdfs-site.xml \/etc\/hadoop\/conf\/hdfs-site.xml.backup\nsudo mv \/etc\/hadoop\/conf\/core-site.xml \/etc\/hadoop\/conf\/core-site.xml.backup\nsudo mv \/etc\/hadoop\/conf\/mapred-site.xml \/etc\/hadoop\/conf\/mapred-site.xml.backup\nsudo mv \/etc\/hadoop\/conf\/yarn-site.xml \/etc\/hadoop\/conf\/yarn-site.xml.backup\n\n### Configure hdfs-site.xml\nhdfs_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n<property><name>dfs.permissions.superusergroup<\/name><value>hadoop<\/value><\/property>\n<property><name>dfs.namenode.name.dir<\/name><value>file:\/\/\/data\/1\/dfs\/nn,file:\/\/\/nfsmount\/dfs\/nn<\/value><\/property>\n<property>\n    <name>dfs.datanode.data.dir<\/name>\n    <value>file:\/\/\/data\/1\/dfs\/dn,file:\/\/\/data\/2\/dfs\/dn,file:\/\/\/data\/3\/dfs\/dn,file:\/\/\/data\/4\/dfs\/dn<\/value>\n<\/property>\n<property>\n    <name>dfs.namenode.http-address<\/name>\n    <value>#@#IPADDRESS#@#:50070<\/value>\n    <description>The address and the base port on which the dfs NameNode Web UI will listen.<\/description>\n<\/property>\n<property><name>dfs.namenode.datanode.registration.ip-hostname-check<\/name><value>false<\/value><\/property>  \n<\/configuration>\nEOF\n)\necho $hdfs_site_xml | sudo tee \/etc\/hadoop\/conf\/hdfs-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/0.0.0.0\/g' \/etc\/hadoop\/conf\/hdfs-site.xml\n\n### Configure core-site.xml\ncore_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n<property><name>fs.defaultFS<\/name><value>hdfs:\/\/#@#IPADDRESS#@#<\/value><\/property>\n<property><name>hadoop.proxyuser.mapred.groups<\/name><value>*<\/value><\/property>\n<property><name>hadoop.proxyuser.mapred.hosts<\/name><value>*<\/value><\/property>\n<\/configuration>\nEOF\n)\necho $core_site_xml | sudo tee \/etc\/hadoop\/conf\/core-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/0.0.0.0\/g' \/etc\/hadoop\/conf\/core-site.xml\n\n### Configure mapred-site.xml\nmapred_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n<property><name>mapreduce.framework.name<\/name><value>yarn<\/value><\/property>\n<property><name>yarn.app.mapreduce.am.staging-dir<\/name><value>\/user<\/value><\/property>\n<property><name>mapreduce.jobhistory.address<\/name><value>@#IPADDRESS#@#:10020<\/value><\/property>\n<property><name>mapreduce.jobhistory.webapp.address<\/name><value>#@#IPADDRESS#@#:19888<\/value><\/property>\n<\/configuration>\nEOF\n)\necho $mapred_site_xml | sudo tee \/etc\/hadoop\/conf\/mapred-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/0.0.0.0\/g' \/etc\/hadoop\/conf\/mapred-site.xml\n\n\n### Configure yarn-site.xml\nyarn_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n  <property>\n    <name>yarn.nodemanager.aux-services<\/name>\n    <value>mapreduce_shuffle<\/value>\n  <\/property>\n  <property>\n    <name>yarn.nodemanager.aux-services.mapreduce_shuffle.class<\/name>\n    <value>org.apache.hadoop.mapred.ShuffleHandler<\/value>\n  <\/property>\n  <property>\n    <name>yarn.log-aggregation-enable<\/name>\n    <value>true<\/value>\n  <\/property>\n  <property>\n    <description>Where to store container logs.<\/description>\n    <name>yarn.nodemanager.log-dirs<\/name>\n    <value>file:\/\/\/var\/log\/hadoop-yarn\/containers<\/value>\n  <\/property>\n  <property>\n    <description>Where to aggregate logs to.<\/description>\n    <name>yarn.nodemanager.remote-app-log-dir<\/name>\n    <value>hdfs:\/\/var\/log\/hadoop-yarn\/apps<\/value>\n  <\/property>\n  <property>\n    <description>Classpath for typical applications.<\/description>\n     <name>yarn.application.classpath<\/name>\n     <value>\n        \\$HADOOP_CONF_DIR,\n        \\$HADOOP_COMMON_HOME\/*,\\$HADOOP_COMMON_HOME\/lib\/*,\n        \\$HADOOP_HDFS_HOME\/*,\\$HADOOP_HDFS_HOME\/lib\/*,\n        \\$HADOOP_MAPRED_HOME\/*,\\$HADOOP_MAPRED_HOME\/lib\/*,\n        \\$HADOOP_YARN_HOME\/*,\\$HADOOP_YARN_HOME\/lib\/*\n     <\/value>\n  <\/property>\n  <property>\n    <name>yarn.resourcemanager.hostname<\/name>\n    <value>#@#IPADDRESS#@#<\/value>\n  <\/property>\n  <property>\n    <name>yarn.nodemanager.local-dirs<\/name>\n    <value>file:\/\/\/data\/1\/yarn\/local,file:\/\/\/data\/2\/yarn\/local,file:\/\/\/data\/3\/yarn\/local<\/value>\n  <\/property>\n<\/configuration>\nEOF\n)\necho $yarn_site_xml | sudo tee \/etc\/hadoop\/conf\/yarn-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/0.0.0.0\/g' \/etc\/hadoop\/conf\/yarn-site.xml\n\necho \"Master @@{address}@@ is configured\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"7e198d6a_runbook","main_task_local_reference":{"kind":"app_task","name":"e2a56699_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e55dd2f6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"2e37ae0e_runbook","main_task_local_reference":{"kind":"app_task","name":"e55dd2f6_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"StartMasterServices"}],"name":"8388fed4_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"StartMasterServices","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n##############################################\n# Name        : Hadoop_Master_Start.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to start Hadoop master services\n# Compatibility : Centos 6, 7\n##############################################\n\nsudo -u hdfs hdfs namenode -format\nfor x in `cd \/etc\/init.d ; ls hadoop-hdfs-*` ; do sudo service $x start ; done\nsudo -u hdfs hadoop fs -mkdir -p \/var\/log\/hadoop-yarn\nsudo -u hdfs hadoop fs -chown yarn:mapred \/var\/log\/hadoop-yarn\n\n#systemctl hadoop-mapreduce-historyserver restart\n#systemctl hadoop-yarn-resourcemanager restart\n#systemctl hadoop-hdfs-namenode restart\nfor x in `cd \/etc\/init.d ; ls hadoop-*` ; do sudo service $x restart ; done\n\necho \"Master service started\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"f5669886_runbook","main_task_local_reference":{"kind":"app_task","name":"8388fed4_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"199300db_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"9a25ffb9_runbook","main_task_local_reference":{"kind":"app_task","name":"199300db_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"cb682cfd_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"97357818_runbook","main_task_local_reference":{"kind":"app_task","name":"cb682cfd_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Package Install"}],"name":"a875bfcb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Package Install","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nset -ex\n\n##############################################\n# Name        : Hadoop_Master_setup.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to setup Hadoop master \n# Compatibility : Centos 6, 7\n##############################################\n\n\nsudo yum update -y\nsudo yum install -y wget java-1.8.0-openjdk\ncurl -O https:\/\/archive.cloudera.com\/cdh5\/one-click-install\/redhat\/7\/x86_64\/cloudera-cdh-5-0.x86_64.rpm\nsudo yum -y --nogpgcheck localinstall cloudera-cdh-5-0.x86_64.rpm \nsudo rpm --import https:\/\/archive.cloudera.com\/cdh5\/redhat\/7\/x86_64\/cdh\/RPM-GPG-KEY-cloudera\nsudo yum update -y\n\nsudo yum -y install zookeeper-server\nsudo mkdir -p \/var\/lib\/zookeeper\nsudo chown -R zookeeper \/var\/lib\/zookeeper\/\nsudo service zookeeper-server init\nsudo service zookeeper-server start\nsudo yum -y install hadoop-hdfs-namenode\nsudo yum -y install hadoop-client\nsudo yum install -y hadoop-yarn-resourcemanager\nsudo service zookeeper-server start\n\necho \"Master setup done\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"a367699c_runbook","main_task_local_reference":{"kind":"app_task","name":"a875bfcb_dag"},"variable_list":[]},"name":"Common Setup Master"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Hadoop master Uninstall"}],"name":"bf528bf1_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Hadoop master Uninstall","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nset -ex\n\n##############################################\n# Name        : Hadoop_Master_uninstall.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to uninstall hadoop master \n# Compatibility : Centos 6, 7\n##############################################\n\n\nsudo yum remove -y wget java-1.8.0-openjdk\nsudo yum -y remove cloudera-cdh-5-0.x86_64.rpm \nsudo yum -y remove zookeeper-server\nsudo yum -y remove hadoop*","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"f162ae0c_runbook","main_task_local_reference":{"kind":"app_task","name":"bf528bf1_dag"},"variable_list":[]},"name":"Common Uninstall"}],"depends_on_list":[],"name":"Hadoop_Master","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ConfigureSlave"}],"name":"93923d52_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ConfigureSlave","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n##############################################\n# Name        : Hadoop_Slave_Configure.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to configure slave with master details \n# Compatibility : Centos 6, 7\n##############################################\n\nset -ex\nsudo cp -r \/etc\/hadoop\/conf.empty \/etc\/hadoop\/conf.my_cluster\nsudo alternatives --install \/etc\/hadoop\/conf hadoop-conf \/etc\/hadoop\/conf.my_cluster 50\nsudo alternatives --set hadoop-conf \/etc\/hadoop\/conf.my_cluster\n\nsudo mkdir -p \/data\/1\/dfs\/dn \/data\/2\/dfs\/dn \/data\/3\/dfs\/dn \/data\/4\/dfs\/dn\nsudo chown -R hdfs:hdfs \/data\/1\/dfs\/dn \/data\/2\/dfs\/dn \/data\/3\/dfs\/dn \/data\/4\/dfs\/dn\nsudo mkdir -p \/data\/1\/yarn\/local \/data\/2\/yarn\/local \/data\/3\/yarn\/local \/data\/4\/yarn\/local\nsudo mkdir -p \/data\/1\/yarn\/logs \/data\/2\/yarn\/logs \/data\/3\/yarn\/logs \/data\/4\/yarn\/logs\nsudo chown -R yarn:yarn \/data\/1\/yarn\/local \/data\/2\/yarn\/local \/data\/3\/yarn\/local \/data\/4\/yarn\/local\nsudo chown -R yarn:yarn \/data\/1\/yarn\/logs \/data\/2\/yarn\/logs \/data\/3\/yarn\/logs \/data\/4\/yarn\/logs\n\nsudo mv \/etc\/hadoop\/conf\/hdfs-site.xml \/etc\/hadoop\/conf\/hdfs-site.xml.backup\nsudo mv \/etc\/hadoop\/conf\/core-site.xml \/etc\/hadoop\/conf\/core-site.xml.backup\nsudo mv \/etc\/hadoop\/conf\/mapred-site.xml \/etc\/hadoop\/conf\/mapred-site.xml.backup\nsudo mv \/etc\/hadoop\/conf\/yarn-site.xml \/etc\/hadoop\/conf\/yarn-site.xml.backup\n\n### Configure hdfs-site.xml\nhdfs_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n<property><name>dfs.permissions.superusergroup<\/name><value>hadoop<\/value><\/property>\n<property><name>dfs.namenode.name.dir<\/name><value>file:\/\/\/data\/1\/dfs\/nn,file:\/\/\/nfsmount\/dfs\/nn<\/value><\/property>\n<property>\n    <name>dfs.datanode.data.dir<\/name>\n    <value>file:\/\/\/data\/1\/dfs\/dn,file:\/\/\/data\/2\/dfs\/dn,file:\/\/\/data\/3\/dfs\/dn,file:\/\/\/data\/4\/dfs\/dn<\/value>\n<\/property>\n<property>\n    <name>dfs.namenode.http-address<\/name>\n    <value>#@#IPADDRESS#@#:50070<\/value>\n    <description>The address and the base port on which the dfs NameNode Web UI will listen.<\/description>\n<\/property>\n<property><name>dfs.namenode.datanode.registration.ip-hostname-check<\/name><value>false<\/value><\/property>  \n<\/configuration>\nEOF\n)\necho $hdfs_site_xml | sudo tee \/etc\/hadoop\/conf\/hdfs-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/@@{Hadoop_Master.address}@@\/g' \/etc\/hadoop\/conf\/hdfs-site.xml\n\n### Configure core-site.xml\ncore_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n<property><name>fs.defaultFS<\/name><value>hdfs:\/\/#@#IPADDRESS#@#<\/value><\/property>\n<property><name>hadoop.proxyuser.mapred.groups<\/name><value>*<\/value><\/property>\n<property><name>hadoop.proxyuser.mapred.hosts<\/name><value>*<\/value><\/property>\n<\/configuration>\nEOF\n)\necho $core_site_xml | sudo tee \/etc\/hadoop\/conf\/core-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/@@{Hadoop_Master.address}@@\/g' \/etc\/hadoop\/conf\/core-site.xml\n\n### Configure mapred-site.xml\nmapred_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n<property><name>mapreduce.framework.name<\/name><value>yarn<\/value><\/property>\n<property><name>yarn.app.mapreduce.am.staging-dir<\/name><value>\/user<\/value><\/property>\n<property><name>mapreduce.jobhistory.address<\/name><value>@#IPADDRESS#@#:10020<\/value><\/property>\n<property><name>mapreduce.jobhistory.webapp.address<\/name><value>#@#IPADDRESS#@#:19888<\/value><\/property>\n<\/configuration>\nEOF\n)\necho $mapred_site_xml | sudo tee \/etc\/hadoop\/conf\/mapred-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/@@{Hadoop_Master.address}@@\/g' \/etc\/hadoop\/conf\/mapred-site.xml\n\n\n### Configure yarn-site.xml\nyarn_site_xml=$(cat <<EOF\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text\/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n  <property>\n    <name>yarn.nodemanager.aux-services<\/name>\n    <value>mapreduce_shuffle<\/value>\n  <\/property>\n  <property>\n    <name>yarn.nodemanager.aux-services.mapreduce_shuffle.class<\/name>\n    <value>org.apache.hadoop.mapred.ShuffleHandler<\/value>\n  <\/property>\n  <property>\n    <name>yarn.log-aggregation-enable<\/name>\n    <value>true<\/value>\n  <\/property>\n  <property>\n    <description>Where to store container logs.<\/description>\n    <name>yarn.nodemanager.log-dirs<\/name>\n    <value>file:\/\/\/var\/log\/hadoop-yarn\/containers<\/value>\n  <\/property>\n  <property>\n    <description>Where to aggregate logs to.<\/description>\n    <name>yarn.nodemanager.remote-app-log-dir<\/name>\n    <value>hdfs:\/\/var\/log\/hadoop-yarn\/apps<\/value>\n  <\/property>\n  <property>\n    <description>Classpath for typical applications.<\/description>\n     <name>yarn.application.classpath<\/name>\n     <value>\n        \\$HADOOP_CONF_DIR,\n        \\$HADOOP_COMMON_HOME\/*,\\$HADOOP_COMMON_HOME\/lib\/*,\n        \\$HADOOP_HDFS_HOME\/*,\\$HADOOP_HDFS_HOME\/lib\/*,\n        \\$HADOOP_MAPRED_HOME\/*,\\$HADOOP_MAPRED_HOME\/lib\/*,\n        \\$HADOOP_YARN_HOME\/*,\\$HADOOP_YARN_HOME\/lib\/*\n     <\/value>\n  <\/property>\n  <property>\n    <name>yarn.resourcemanager.hostname<\/name>\n    <value>#@#IPADDRESS#@#<\/value>\n  <\/property>\n  <property>\n    <name>yarn.nodemanager.local-dirs<\/name>\n    <value>file:\/\/\/data\/1\/yarn\/local,file:\/\/\/data\/2\/yarn\/local,file:\/\/\/data\/3\/yarn\/local<\/value>\n  <\/property>\n<\/configuration>\nEOF\n)\necho $yarn_site_xml | sudo tee \/etc\/hadoop\/conf\/yarn-site.xml\nsudo sed -i -e 's\/#@#IPADDRESS#@#\/@@{Hadoop_Master.address}@@\/g' \/etc\/hadoop\/conf\/yarn-site.xml\n\necho \"Slave @@{address}@@ configured\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"fdb10848_runbook","main_task_local_reference":{"kind":"app_task","name":"93923d52_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e6bba8fd_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"8ff6c93c_runbook","main_task_local_reference":{"kind":"app_task","name":"e6bba8fd_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"StartSlaveServices"}],"name":"0f3aa2b2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"StartSlaveServices","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n##############################################\n# Name        : Hadoop_Slave_Start.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to start Hadoop slave services\n# Compatibility : Centos 6, 7\n##############################################\n\nsudo service hadoop-hdfs-datanode restart\nsudo service hadoop-hdfs-secondarynamenode restart\nsudo service hadoop-yarn-nodemanager restart\n\necho \"Service started\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"88e70752_runbook","main_task_local_reference":{"kind":"app_task","name":"0f3aa2b2_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ea1c1b64_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"114d4110_runbook","main_task_local_reference":{"kind":"app_task","name":"ea1c1b64_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"83fd696c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"f8ca40a2_runbook","main_task_local_reference":{"kind":"app_task","name":"83fd696c_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Package Install Slave"}],"name":"8bdf944a_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Package Install Slave","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nset -ex\n\n##############################################\n# Name        : Hadoop_slave_setup.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to setup Hadoop \n# Compatibility : Centos 6, 7\n##############################################\n\n\nsudo yum update -y\nsudo yum install -y wget java-1.8.0-openjdk\n\ncurl -O https:\/\/archive.cloudera.com\/cdh5\/one-click-install\/redhat\/7\/x86_64\/cloudera-cdh-5-0.x86_64.rpm\nsudo yum -y --nogpgcheck localinstall cloudera-cdh-5-0.x86_64.rpm \nsudo rpm --import https:\/\/archive.cloudera.com\/cdh5\/redhat\/7\/x86_64\/cdh\/RPM-GPG-KEY-cloudera\nsudo yum update -y\n\nsudo yum -y install hadoop-hdfs-secondarynamenode\n#yum -y install hadoop-yarn-resourcemanager\nsudo yum -y install hadoop-yarn-nodemanager hadoop-hdfs-datanode hadoop-mapreduce\nsudo yum -y install hadoop-client\nsudo systemctl stop hadoop-hdfs-secondarynamenode\n#sudo systemctl stop hadoop-yarn-resourcemanager\nsudo systemctl stop hadoop-yarn-nodemanager \nsudo systemctl stop hadoop-hdfs-datanode\n#sudo systemctl stop hadoop-mapreduce\n\necho \"Slave Setup Done\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"b33cbaa0_runbook","main_task_local_reference":{"kind":"app_task","name":"8bdf944a_dag"},"variable_list":[]},"name":"Common Setup Slave"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Hadoop Slave uninstall"}],"name":"dd26a660_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Hadoop Slave uninstall","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nset -ex\n\n##############################################\n# Name        : Hadoop_slave_uninstall.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to uninstall Hadoop \n# Compatibility : Centos 6, 7\n##############################################\n\n\nsudo yum -y remove java-1.8.0-openjdk\n\nsudo yum -y remove cloudera-cdh-5-0.x86_64.rpm \n\nsudo yum -y remove hadoop*","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"8106346a_runbook","main_task_local_reference":{"kind":"app_task","name":"dd26a660_dag"},"variable_list":[]},"name":"Common Uninstall"}],"depends_on_list":[{"kind":"app_service","name":"Hadoop_Master"}],"name":"Hadoop_Slave","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"HadoopMasterAHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"timeout_secs":true},"create_spec":{"categories":true,"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true}}},"os_type":"Linux","create_spec":{"name":"HadoopMaster","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"cb31b81c-d69d-4ba8-9101-cb2ecf2a0bc9"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":4,"gpu_list":[],"memory_size_mib":8192,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\npassword: @@{CENTOS.secret}@@\nchpasswd: { expire: False }\nssh_pwauth: True"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"9055b343-459a-4ea0-96fa-91719fcc14e8","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS_1CD","uuid":"c9bc10c2-df3f-4985-a44a-495ce5d9e110"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"HadoopSlaveAHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"timeout_secs":true},"create_spec":{"categories":true,"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true}}},"os_type":"Linux","create_spec":{"name":"HadoopSlave@@{calm_array_index}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"cb31b81c-d69d-4ba8-9101-cb2ecf2a0bc9"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":4,"gpu_list":[],"memory_size_mib":8192,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\npassword: @@{CENTOS.secret}@@\nchpasswd: { expire: False }\nssh_pwauth: True"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"9055b343-459a-4ea0-96fa-91719fcc14e8","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS_1CD","uuid":"c9bc10c2-df3f-4985-a44a-495ce5d9e110"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS","editables":{"username":true,"secret":true}}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Hadoop_Master"}],"name":"AHVMasterPkg","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHVMasterPkg"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Common Setup Master"}],"name":"2ff5a9f7_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Common Setup Master","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"a367699c_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"b868dc2f_runbook","main_task_local_reference":{"kind":"app_task","name":"2ff5a9f7_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHVMasterPkg"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Common Uninstall"}],"name":"fe3dd8c8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Common Uninstall","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"f162ae0c_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"380f1d4d_runbook","main_task_local_reference":{"kind":"app_task","name":"fe3dd8c8_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Hadoop_Slave"}],"name":"AHVSlavePkg","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHVSlavePkg"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Common Setup Slave"}],"name":"9177509c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Common Setup Slave","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"b33cbaa0_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"b80a5731_runbook","main_task_local_reference":{"kind":"app_task","name":"9177509c_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHVSlavePkg"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Common Uninstall"}],"name":"307a67f6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Hadoop_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Common Uninstall","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"8106346a_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"7df65127_runbook","main_task_local_reference":{"kind":"app_task","name":"307a67f6_dag"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"31148de9_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"AHVMasterPkg"}],"substrate_local_reference":{"kind":"app_substrate","name":"HadoopMasterAHV"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"e9a8065b_deployment","min_replicas":"2","default_replicas":"2","depends_on_list":[],"editables":{"min_replicas":true,"max_replicas":true},"published_service_local_reference_list":[],"max_replicas":"5","package_local_reference_list":[{"kind":"app_package","name":"AHVSlavePkg"}],"substrate_local_reference":{"kind":"app_substrate","name":"HadoopSlaveAHV"},"variable_list":[],"description":""}],"description":"","action_list":[{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleOutSlaves"}],"name":"175b857b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"e9a8065b_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ScaleOutSlaves","attrs":{"scaling_count":"@@{ScaleOut_Count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"eda7e2ec_runbook","main_task_local_reference":{"kind":"app_task","name":"175b857b_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"ScaleOut_Count","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]},"name":"ScaleOutSlaves"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleInSlaves"}],"name":"f43b78e9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"e9a8065b_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ScaleInSlaves","attrs":{"scaling_count":"@@{ScaleIn_Count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"d210585a_runbook","main_task_local_reference":{"kind":"app_task","name":"f43b78e9_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"ScaleIn_Count","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]},"name":"ScaleInSlaves"}],"name":"Nutanix","variable_list":[]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CENTOS"},"type":"USER"},"name":"Hadoop"},"api_version":"3.0","metadata":{"last_update_time":"1592951024495966","kind":"blueprint","spec_version":2,"creation_time":"1592950786275343","categories":{"AppFamily":"BI-Productivity"},"name":"Hadoop"}}