{"status":{},"contains_secrets":false,"product_version":"3.0.0.0","spec":{"description":"* [RabbitMQ](https:\/\/@@{RabbitMQ.address}@@)","resources":{"client_attrs":{"56e02fb6-c897-42ac-ac26-df25fd3fb9bb":{"y":226,"x":532},"66ffb50e-e7ce-41c1-8a2b-65e9f1bbd81e":{"y":226,"x":532},"0c0a43b9_deployment":{"y":226,"x":532},"0fd01981-15b7-4cbd-8440-e94022720591":{"y":226,"x":532},"640fcd38-d578-4d2e-aa8d-8512c891d3c1":{"y":226,"x":532}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Management Plugin"}],"name":"a17719b2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Enable Management Plugin","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n##############################################\n# Name        : RabbitMQ_management_enable.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to enable management server\n# Compatibility : Centos 6, 7\n##############################################\n\nsudo rabbitmq-plugins enable rabbitmq_management\nsudo systemctl restart rabbitmq-server","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"8bc915a0_runbook","main_task_local_reference":{"kind":"app_task","name":"a17719b2_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"dc4c444e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4623630f_runbook","main_task_local_reference":{"kind":"app_task","name":"dc4c444e_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"StartService"}],"name":"fb477b70_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"StartService","attrs":{"script":"#!\/bin\/bash\nset -ex\n\n##############################################\n# Name        : RabbitMQ_Start.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to start RabbitMQ \n# Compatibility : Centos 6, 7\n##############################################\n\nsudo systemctl start rabbitmq-server\nsudo systemctl enable rabbitmq-server","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"9ed42522_runbook","main_task_local_reference":{"kind":"app_task","name":"fb477b70_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9e442416_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"5b4ddc18_runbook","main_task_local_reference":{"kind":"app_task","name":"9e442416_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"18283e60_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"1456c48c_runbook","main_task_local_reference":{"kind":"app_task","name":"18283e60_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"RabbitMQ Setup"}],"name":"5f201fa9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"RabbitMQ Setup","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n##############################################\n# Name        : RabbitMQ_setup.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to setup RabbitMQ \n# Compatibility : Centos 6, 7\n##############################################\n\nsudo hostnamectl set-hostname --static @@{name}@@\n\nsudo yum update -y --quiet\nsudo yum install -y epel-release\nsudo yum install -y erlang\n\nsudo rpm --import https:\/\/www.rabbitmq.com\/rabbitmq-release-signing-key.asc\nsudo yum install -y rabbitmq-server\n\nsudo systemctl start rabbitmq-server","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"f7f86138_runbook","main_task_local_reference":{"kind":"app_task","name":"5f201fa9_dag"},"variable_list":[]},"name":"Common Setup"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"RabbitMQ Uninstallation"}],"name":"a5ce7264_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"RabbitMQ Uninstallation","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n##############################################\n# Name        : RabbitMQ_uninstall.sh\n# Author      : Calm Devops\n# Version     : 1.0\n# Description : Script to uninstall RabbitMQ \n# Compatibility : Centos 6, 7\n##############################################\n\nsudo yum remove -y erlang\n\nsudo yum remove -y rabbitmq-server\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"599bc6bd_runbook","main_task_local_reference":{"kind":"app_task","name":"a5ce7264_dag"},"variable_list":[]},"name":"Common Uninstall"}],"depends_on_list":[],"name":"RabbitMQ","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"AHV_Centos_RabbitMQ","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"timeout_secs":true},"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"boot_config":true,"guest_customization":true,"disk_list":{}},"name":true,"categories":true}},"os_type":"Linux","create_spec":{"name":"rabbitmq-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"cb31b81c-d69d-4ba8-9101-cb2ecf2a0bc9"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\npassword: @@{CENTOS.secret}@@\nchpasswd: { expire: False }\nssh_pwauth: True"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"9055b343-459a-4ea0-96fa-91719fcc14e8","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS_1CD","uuid":"c9bc10c2-df3f-4985-a44a-495ce5d9e110"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS","editables":{"username":true,"secret":true}}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"RabbitMQ"}],"name":"AHV_RabbitMQ_Package","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_RabbitMQ_Package"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Common Setup"}],"name":"fd971daf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Common Setup","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"f7f86138_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"66ce38cf_runbook","main_task_local_reference":{"kind":"app_task","name":"fd971daf_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_RabbitMQ_Package"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Common Uninstall"}],"name":"1f99d0e8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"RabbitMQ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Common Uninstall","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"599bc6bd_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"b43147a6_runbook","main_task_local_reference":{"kind":"app_task","name":"1f99d0e8_dag"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"0c0a43b9_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"AHV_RabbitMQ_Package"}],"substrate_local_reference":{"kind":"app_substrate","name":"AHV_Centos_RabbitMQ"},"variable_list":[],"description":""}],"description":"","action_list":[],"name":"Nutanix","variable_list":[]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CENTOS"},"type":"USER"},"name":"Rabit MQ"},"api_version":"3.0","metadata":{"last_update_time":"1592949496223217","kind":"blueprint","spec_version":5,"creation_time":"1592949333837766","categories":{"AppFamily":"BI-Productivity"},"name":"Rabit MQ"}}