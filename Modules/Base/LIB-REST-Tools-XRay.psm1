

Function REST-XRay-Login {
  Param (
    [object] $appdetail,
    [object] $action,
    [object] $datagen,
    [object] $datavar
  )

  $credPair = "nutanix:nutanix/4u"
  $encodedCredentials = [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes($credPair))
  $headers = @{ Authorization = "Basic $encodedCredentials" }

  write-log -message "Replacing JSON String Variables"
$Json = @"
{
    "password":"$($datavar.PEPass)"
}
"@ 
  $URL = "https://$($datagen.XRayIP)/xray/v1/auth"

  write-log -message "Using URL $URL"

  try{
    $task = Invoke-RestMethod -Uri $URL -method "post" -body $Json -ContentType 'application/json' -headers $headers;
  } catch {
    sleep 10

    $FName = Get-FunctionName;write-log -message "Error Caught on function $FName" -sev "WARN"

    $task = Invoke-RestMethod -Uri $URL -method "post" -body $Json -ContentType 'application/json' -headers $headers;
  }

  Return $task
} 

Function REST-XRay-EULA {
  Param (
    [object] $datagen,
    [object] $datavar
  )

  $credPair = "$($datavar.peadmin):$($datavar.PEPass)"
  $encodedCredentials = [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes($credPair))
  $headers = @{ Authorization = "Basic $encodedCredentials" }

  write-log -message "Accepting XRay EULA"
$Json = @"
{
  "content": "\n<p align=center style='text-align:center'><b>\nX-RAY LICENSE AGREEMENT</b></p>\n\n<p align=center style='text-align:center'><b>\nIMPORTANT -- READ CAREFULLY</b></p>\n\n<p>&nbsp;</p>\n\n<p style='text-align:justify'>READ\nTHIS LICENSE AGREEMENT (THE \"<u>AGREEMENT</u>\") BEFORE DOWNLOADING, INSTALLING,\nCOPYING, CONFIGURING, ACCESSING, DEPLOYING AND/OR USING THE X-RAY SOFTWARE, THE\nNUTANIX SOFTWARE OR THE DOCUMENTATION (EACH AS DEFINED BELOW). BY DOWNLOADING,\nINSTALLING, COPYING, CONFIGURING, ACCESSING, DEPLOYING, USING AND/OR OTHERWISE\nUSING ALL OR ANY PART OF THE X-RAY SOFTWARE, NUTANIX SOFTWARE OR THE\nDOCUMENTATION, OR BY CLICKING ON AN \"ACCEPT\" BUTTON, YOU AGREE TO THE TERMS AND\nCONDITIONS OF THIS AGREEMENT. YOU FURTHER AGREE THAT YOU ARE BOUND BY AND ARE A\nPARTY TO THIS AGREEMENT, AND, IF YOU ARE ACCEPTING THESE TERMS ON BEHALF OF\nANOTHER PERSON OR A COMPANY OR OTHER LEGAL ENTITY, YOU REPRESENT AND WARRANT\nTHAT YOU HAVE FULL AUTHORITY TO BIND THAT PERSON, COMPANY, OR LEGAL ENTITY TO\nTHESE TERMS.</p>\n\n<p style='text-align:justify'>&nbsp;</p>\n\n<p style='text-align:justify'>YOUR\nUSE OF THE X-RAY SOFTWARE, NUTANIX SOFTWARE AND DOCUMENTATION IS EXPRESSLY\nCONDITIONED ON YOUR ACCEPTANCE OF THE TERMS AND CONDITIONS OF THIS AGREEMENT.\nIF YOU DO NOT AGREE TO THE TERMS AND CONDITIONS OF THIS AGREEMENT, DO NOT\nDOWNLOAD, INSTALL, COPY, CONFIGURE, ACCESS, DEPLOY, CLICK ON AN \"ACCEPT\" BUTTON\nAND/OR OTHERWISE USE THE X-RAY SOFTWARE, NUTANIX SOFTWARE OR DOCUMENTATION.</p>\n\n<p>&nbsp;</p>\n\n<p>This Agreement is\nbetween you, on behalf of the company, partnership or business entity that you represent\n(\"<u>Licensee</u>\") and Nutanix, Inc. a Delaware corporation, with offices\nlocated at 1740 Technology Drive, Suite 150, San Jose, CA 95110, USA (\"<u>Nutanix</u>\")\n(each of Licensee and Nutanix a \"<u>Party</u>\" and together the \"<u>Parties</u>\"),\nand is effective as of the date on which Licensee accepts the terms of this\nAgreement (\"<u>Effective Date</u>\").</p>\n\n<p>&nbsp;</p>\n\n<p align=center style='text-align:center'><b>Recitals</b></p>\n\n<p align=center style='text-align:center'>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A.&nbsp;\nNutanix owns a software benchmarking tool called \"X-Ray\" (the \"<u>X-Ray\nSoftware</u>\") that is capable of running benchmark tests to compare the\nperformance of Nutanix software against the performance of certain other software\ncurrently used by Licensee.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B.&nbsp;\nLicensee desires to obtain a limited license to use the X-Ray Software for\nrunning certain benchmark tests and Nutanix is willing to grant such a license\non the terms and conditions set forth in this Agreement.</p>\n\n<p>&nbsp;</p>\n\n<p>NOW, THEREFORE, in\nconsideration of the terms and conditions of this Agreement, the Parties agree\nas follows:</p>\n\n<p>&nbsp;</p>\n\n<p>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEFINITIONS</p>\n\n<p>&nbsp;</p>\n\n<p>In addition to the\ncapitalized terms set forth above, the following capitalized terms shall have\nthe following definitions:</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Benchmark\nResults</u>\" means all output, results and reports generated by execution of\nthe X-Ray Software using the Test Suites to run benchmarks comparing the\nperformance of the Target Software and the Nutanix software.<br>\n<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Documentation</u>\"\nmeans any manuals, instructions and other documentation pertaining to the X-Ray\nSoftware that Nutanix may deliver or make available to Licensee.<br>\n<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Licensee-Created\nTest Suites</u>\" means any tests developed solely by or for Licensee, without modification\nof any Nutanix Test Suites, for use by the X-Ray Software to run benchmarks\ncomparing the performance of Nutanix software in the execution of such tests to\nthe performance of the Target Software in the execution of such tests.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Licensee-Modified\nTest Suites</u>\" means any modified versions of Nutanix Test Suites developed\nby or for Licensee, for use by the X-Ray Software to run benchmarks comparing\nthe performance of Nutanix software in the execution of such tests to the\nperformance of the Target Software in the execution of such tests.<br>\n<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Nutanix\nSoftware</u>\" means any Nutanix software supplied to Licensee for the purpose\nof conducting benchmark tests against the Target Software using the X-Ray\nSoftware and the Test Suites.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Nutanix\nTest Suites</u>\" means any tests supplied by Nutanix to Licensee for use by the\nX-Ray Software to run benchmarks comparing the performance of Nutanix software in\nthe execution of such tests to the performance of the Target Software in the\nexecution of such tests.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Target\nSoftware</u>\" means those third party computer program(s) for which Licensee\nuses the X-Ray Software to run the Test Suites to generate Benchmark Results.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Test\nSuites</u>\" means, collectively, Nutanix Test Suites, Licensee-Created Test Suites\nand Licensee-Modified Test Suites.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Intellectual\nProperty Rights</u>\" means patents of any type, design rights, utility models\nor other similar invention rights, copyrights, mask work rights, trade secret\nor confidentiality rights, trademarks, trade names and service marks and any\nother intangible property rights, including applications and registrations for\nany of the foregoing, in any country, arising under statutory or common law or\nby contract and whether or not perfected, now existing or hereafter filed,\nissued, or acquired.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.10&nbsp;&nbsp;&nbsp;&nbsp; \"<u>Use</u>\"\nmeans to activate the processing capabilities of the X-Ray Software, load,\nexecute, access, employ the X-Ray Software, or display information resulting\nfrom such capabilities, but not to copy or make copies of the X-Ray Software\nfor any purpose except for internal use, storage or backups as permitted in\nSection 2.1.1 below. </p>\n\n<p>&nbsp;</p>\n\n<p>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LICENSE\nGRANT AND SERVICES</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Grant</u>.&nbsp;\nSubject to Section 2.3, and conditioned upon Licensee's compliance with all the\nterms and conditions of this Agreement, Nutanix grants to Licensee a\nnon-exclusive, non-transferable, non-sublicensable, terminable (in accordance\nwith Section 5 herein) license:</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (a)&nbsp;\nto Use the X-Ray Software, Nutanix Test Suites and Documentation solely on\nLicensee's own premises and solely (i) to create Licensee-Created Test Suites\nand Licensee-Modified Test Suites, and (ii) to run the Test Suites Using the\nX-Ray Software to generate Benchmark Results; and<br>\n<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (b)&nbsp;\nto Use the Nutanix Software solely on Licensee's own premises and solely in\nconjunction with the X-Ray Software to conduct benchmark tests against the\nTarget Software using the Test Suites (the uses set forth in clauses (a) and\n(b), collectively, the \"<u>Permitted Uses</u>\").</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Restrictions</u>.&nbsp;\nThe grant of licenses in Section 2.1 does not permit Licensee to, and Licensee\nagrees not to: &nbsp;(i) use the Nutanix Software , the X-Ray Software, the\nTest Suites or the Documentation for any use or purpose other than the\nPermitted Uses, including but not limited to use to provide benchmarking or\nother services of any kind to third parties or to run any business operations;\n(ii) lease, loan, resell, sublicense, distribute, or transfer the Nutanix Software,\nthe X-Ray Software, the Test Suites, or the Documentation; (iii) copy or\notherwise reproduce the Nutanix Software, the X-Ray Software, the Test Suites\nor the Documentation except as necessary to Use the Nutanix Software and the\nX-Ray Software for the Permitted Uses; (iv) modify the Nutanix Software, the\nX-Ray Software or the Documentation; (v) modify the Nutanix Test Suites other\nthan to create Licensee-Modified Test Suites for use solely for the Permitted\nUses; or (vi) disassemble, decompile or reverse engineer the Nutanix Software,\nthe X-Ray Software[ or the Nutanix Test Suites], or change or remove any\nproprietary rights notice on any of the foregoing or the Documentation or\nBenchmark Test Results.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Use\nof Open Source Software</u>.&nbsp; Portions of the X-Ray Software may constitute\nopen source software (the \"<u>Open Source Software</u>\") that is distributed\nsubject to one or more applicable open source software license(s) (the \"<u>Open\nSource Software License</u>\").&nbsp; Licensee may use the Open Source Software\nin accordance with the applicable Open Source Software License and, to the\nextent any of the provisions of this Agreement are inconsistent with the\napplicable Open Source Software License, the Open Source Software License shall\ntake precedence.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Services</u>.&nbsp;\nOne or more employees or contractors of Nutanix may provide assistance to\nLicensee with respect to the Use of the X-Ray Software and Test Suites, the Use\nof the Nutanix Software, the creation of Licensee-Modified Test Suites and/or\ninterpretation of the Benchmark Test Results (\"<u>Services</u>\").&nbsp; Such\nServices shall be provided at no charge solely as a courtesy to Licensee, and\nas set forth in Section 6.2 below, such Services shall be provided without\nwarranty and Nutanix shall have no liability with respect to such Services.</p>\n\n<p>&nbsp;</p>\n\n<p>3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CONFIDENTIALITY\nAND ACCESS RESTRICTIONS</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Licensee\nacknowledges and agrees that the Nutanix Software, the X-Ray Software, the\nDocumentation, the Test Suites, and all Benchmark Results shall constitute the\nconfidential information of Nutanix (the \"<u>Confidential Information</u>\"). &nbsp;&nbsp;Licensee\nagrees that (i) it shall not disclose the Confidential Information to any person\nor entity other than its own employees or subcontractors who have a need to\nknow and who are under obligations to keep such Confidential Information\nconfidential, and (ii) it shall not provide access to the Nutanix Software, the\nX-Ray Software, the Documentation, or the Test Suites to any person or entity\nother than its own employees or subcontractors and solely for the Permitted\nUses.</p>\n\n<p>&nbsp;</p>\n\n<p>4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TERM\nAND TERMINATION</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1&nbsp;\n<u>Term</u>.&nbsp; This Agreement and the licenses granted hereunder shall\nbecome effective as of the Effective Date and may be terminated by either party\nat any time upon written notice. In addition, this Agreement automatically\nterminates if Licensee or any of its employees or consultants fail to comply\nwith the terms and conditions of this Agreement. Upon expiration or termination\nof this Agreement for any reason: (a) all licenses granted by Nutanix shall\nimmediately terminate; (b) Licensee shall immediately discontinue use of the\napplicable Nutanix Software, X-Ray Software, the Documentation and the Test\nSuites; (c) Licensee shall destroy all copies of the Nutanix Software, X-Ray\nSoftware, the Documentation and the Test Suites in Licensee's possession, custody\nor control; and (d) if requested, Licensee shall certify to Nutanix in writing\nthat such return or destruction has occurred.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2&nbsp;\n<u>Duties Upon Expiration or Termination</u>.&nbsp; Upon any expiration or termination\nof this Agreement, Licensee shall immediately cease all use of the Nutanix\nSoftware, the X-Ray Software, the Test Suites, the Documentation, and any\nBenchmark Results. Within ten (10) days after any expiration or termination,\nLicensee shall, at Nutanix's election, either return to Nutanix or irretrievably\ndestroy all copies of the foregoing in every form. &nbsp;Upon request of\nNutanix, Licensee shall certify to Nutanix in writing that it has satisfied its\nobligations under this Section 4.2.&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.3&nbsp;\n<u>Survival</u>.&nbsp; Sections 2.3, 3, 4.3, and 5-9 shall survive any\nexpiration or termination of this Agreement.</p>\n\n<p>&nbsp;</p>\n\n<p>5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OWNERSHIP\n</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; As\nbetween Nutanix and Licensee, Nutanix shall be the sole and exclusive owner of\nthe Nutanix Software, the X-Ray Software, the Test Suites, the Documentation,\nand any Benchmark Results, and all Intellectual Property Rights therein.&nbsp;\nLicensee hereby assigns, and agrees to assign, to Nutanix all right, title and\ninterest it may otherwise have or obtain in and to any Licensee-Created Test\nSuites, Licensee-Modified Test Suites and Benchmark Results, and to all\nIntellectual Property Rights therein.&nbsp; At Nutanix's request and expense, during and after the term\nof this Agreement, Licensee shall assist and cooperate with Nutanix in all\nrespects and execute documents and take such further acts reasonably requested\nby Nutanix to acquire, transfer, maintain, perfect and enforce Intellectual\nProperty Rights in the Licensee-Created Test Suites, Licensee-Modified Test Suites\nand Benchmark Results.</p>\n\n<p>&nbsp;</p>\n\n<p>6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARRANTIES\nAND DISCLAIMERS</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Representation\nby Licensee</u>.&nbsp; Licensee represents and warrants that it has sufficient\nrights, by license or otherwise, in the Target Software to permit its use with\nthe X-Ray Software and the Test Suites for benchmarking purposes as\ncontemplated by this Agreement, and that no acts performed by Licensee pursuant\nto this Agreement shall constitute a breach of any license, agreement, or other\nobligation of Licensee pertaining to the Target Software or its use.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Disclaimers\nby Nutanix</u>.&nbsp; THE X-RAY SOFTWARE, NUTANIX SOFTWARE, NUTANIX TEST\nSUITES, DOCUMENTATION, SERVICES AND BENCHMARK RESULTS ARE PROVIDED HEREUNDER \"AS\nIS\" WITHOUT WARRANTY OF ANY KIND.&nbsp; NUTANIX DISCLAIMS ALL WARRANTIES,\nEXPRESS AND IMPLIED WITH RESPECT TO THE FOREGOING, INCLUDING BUT NOT LIMITED TO\nANY IMPLIED WARRANTIES OF MERCHANTABILITY, MERCHANTABLE QUALITY, FITNESS FOR A\nPARTICULAR PURPOSE, OR NON-INFRINGEMENT.&nbsp; Licensee shall be solely\nresponsible for any use of the Benchmark Results and any decisions or actions\nit elects to take or not to take based upon the Benchmark Results, and for any\nconsequences thereof.&nbsp; NUTANIX SHALL HAVE NO LIABILITY FOR DAMAGES OF ANY\nKIND RESULTING FROM THE X-RAY SOFTWARE, THE NUTANIX SOFTWARE, THE BENCHMARK\nRESULTS, THE SERVICES, OR ANY USE THEREOF.</p>\n\n<p>&nbsp;</p>\n\n<p>7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FEEDBACK</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; During\nthe course of this Agreement, Licensee may provide input or feedback regarding the\nX-Ray Software, the Nutanix Software, the Test Suites, or other products,\nservices, business or technology plans of Nutanix (collectively \"<u>Feedback</u>\").\n&nbsp;In order for Nutanix to utilize such Feedback, Licensee grants to Nutanix\na non-exclusive, perpetual, irrevocable, worldwide, royalty-free license, with\nthe right to sublicense, under all relevant Intellectual Property Rights of\nLicensee, to use for any purpose, publish, and disclose such Feedback and to\ndisplay, perform, copy, make, have made, use, sell, and otherwise dispose of Nutanix's\nand its sublicensee's products or services embodying or based upon Feedback in\nany manner and via any media Nutanix chooses, without attribution or reference to\nthe source of the Feedback. &nbsp;Nutanix shall be entitled to use Feedback for\nany purpose without restriction or remuneration of any kind with respect to\nLicensee and/or its representatives. &nbsp;Except for the foregoing license to\nuse Feedback provided by Licensee at its sole discretion, Nutanix acquires no\ntitle or interest in any pre-existing or independently developed data,\ninformation, or Intellectual Property Rights of Licensee under this Agreement.</p>\n\n<p>&nbsp;</p>\n\n<p>8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PULSE\nDIAGNOSTIC DATA</p>\n\n<p>&nbsp;</p>\n\n<p>Licensee elects and authorizes Nutanix to electronically\ncollect, and consents to the collection and use by Nutanix of, Pulse diagnostic\ndata, including system alerts via email, which such data shall be considered\nFeedback under the terms of this Agreement.</p>\n\n<p>&nbsp;</p>\n\n<p>9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GENERAL\n</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Severability</u>.\n&nbsp;In the event any one or more of the provisions contained in this\nAgreement shall be held to be invalid or unenforceable in any respect, such\ninvalidity or unenforceability shall not affect the other provisions of this\nAgreement, and this Agreement shall be construed as if such invalid or\nunenforceable provision had never been contained herein. </p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Waiver</u>.\n&nbsp;No waiver shall be effective unless in writing signed by the Party to be\ncharged with the waiver.&nbsp; If either Party should waive any breach of any\nprovision of this Agreement, it shall not thereby be deemed to have waived any\npreceding or succeeding breach of the same or any other provision hereof. </p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Governing\nLaw</u>.&nbsp; This Agreement shall be governed by and construed under the laws\nof the state of California without regard to or application of its choice of\nlaw rules or principles.&nbsp; In the event of any conflicts between foreign\nlaw, rules, and regulations, and United States of America law, rules, and\nregulations, United States of America law, rules, and regulations shall prevail\nand govern.&nbsp; The United Nations Convention on Contracts for the\nInternational Sale of Goods shall not apply to this Agreement.&nbsp; The\nUniform Computer Information Transactions Act as enacted shall not apply.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Compliance\nwith Laws; Export Control</u>. Each Party shall comply with all laws applicable\nto the actions contemplated by this Agreement. Licensee acknowledges that the X-Ray\nSoftware and Nutanix Software are of United States origin, and are subject to\nthe U.S. Export Administration Regulations, and may be subject to the export\ncontrol laws of the applicable territory, and that diversion contrary to\napplicable export control laws is prohibited. Licensee represents and warrants that\n(1) Licensee is not, and is not acting on behalf of, (a) any person who is a\ncitizen, national, or resident of, or who is controlled by the government of\nany country to which the United States has prohibited export transactions; or\n(b) any person or entity listed on the U.S. Treasury Department lists of\nSpecially Designated Nationals, Foreign Sanctions Evaders, Sectoral Sanctions\nIdentifications, or Palestinian Legislative Council; or the U.S. Commerce\nDepartment Denied Persons List, Entity List, or Unverified List; or the U.S.\nState Department Nonproliferation Sanctions, or Debarred List; and (2) Licensee\nwill not permit the X-Ray Software or Nutanix Software, directly, or\nindirectly, to be used for any purposes prohibited by law, including any\nprohibited development, design, manufacture or production of missiles or\nnuclear, chemical or biological weapons. Licensee agrees that the X-Ray Software\nand Nutanix Software may not be exported/re-exported to Cuba, Iran, North\nKorea, Sudan and Syria.</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>Miscellaneous</u>.\n&nbsp;If any part of this Agreement is held invalid or unenforceable, that part\nshall be construed to reflect the Parties' original intent, and the remaining\nportions remain in full force and effect. The controlling language of this\nAgreement is English. If Licensee has received a translation into another\nlanguage, it has been provided for Licensee's convenience only. A waiver by\neither Party of any term or condition of this Agreement or any breach thereof,\nin any one instance, shall not waive such term or condition or any subsequent\nbreach thereof. Licensee may not assign, delegate any performance, or otherwise\ntransfer by operation of law or otherwise this Agreement or any rights or\nobligations herein. Licensee agrees not to copy, sell, give or assign the X-Ray\nSoftware, Nutanix Software or any part thereof to a third party. Nutanix may\nassign this Agreement to any person or entity at its sole discretion. This\nAgreement shall be binding upon and shall inure to the benefit of the Parties,\ntheir successors and permitted assigns. This Agreement constitutes the entire\nand sole agreement between Licensee and Nutanix with respect to the X-Ray Software,\nthe Nutanix Software and the Documentation and supersedes all prior and\ncontemporaneous agreements relating to the X-Ray Software, the Nutanix Software\nand the Documentation, whether oral or written (including any inconsistent terms\ncontained in a purchase order). If Licensee is found to have breached Section 2\nor Section 3 of this Agreement, then Nutanix shall be awarded attorney fees,\ncosts and expenses. This Agreement may be amended only in writing signed by\nauthorized representatives of both Parties and specifically referring to this\nprovision. This Agreement will be interpreted without being construed for or\nagainst either Party. The words \"includes\" and \"including\" and the abbreviation\n\"e.g.\" will be deemed to be followed by the words \"without limitation\".</p>\n",
  "pulse_optional": true,
  "accepted": true,
  "pulse_content": "{\n  \"global\": {\n    \"activation_token\": {\n      \"default\": \"\", \n      \"description\": \"Token used to activate X-Ray\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"analyses_created\": {\n      \"default\": 0, \n      \"description\": \"Running total for analyses which have been created\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"created_secs\": {\n      \"description\": \"Epoch timestamp at which bundle was created\", \n      \"required\": true, \n      \"type\": \"<type 'float'>\"\n    }, \n    \"current_version\": {\n      \"description\": \"Current version information for X-Ray\", \n      \"required\": true, \n      \"schema\": {\n        \"build_type\": {\n          \"description\": \"Build-type for the installed X-Ray release\", \n          \"required\": true, \n          \"type\": \"<type 'basestring'>\"\n        }, \n        \"commit\": {\n          \"description\": \"Commit hash for the installed X-Ray build\", \n          \"required\": true, \n          \"type\": \"<type 'basestring'>\"\n        }, \n        \"version\": {\n          \"description\": \"X-Ray version number\", \n          \"required\": true, \n          \"type\": \"<type 'basestring'>\"\n        }\n      }, \n      \"type\": \"<type 'dict'>\"\n    }, \n    \"id\": {\n      \"description\": \"Globally unique ID for this metadata bundle\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"instances_created\": {\n      \"default\": 0, \n      \"description\": \"Running count of instances which have been queued\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"kind\": {\n      \"choices\": [\n        \"global\"\n      ], \n      \"description\": \"Kind of metadata, e.g. server, target, instance, etc.\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"num_analyses\": {\n      \"default\": 0, \n      \"description\": \"Current number of analyses\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"num_instances\": {\n      \"default\": 0, \n      \"description\": \"Current number queued, running, and finished instances\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"num_stopped_instances\": {\n      \"default\": 0, \n      \"description\": \"Current number of stopped instances\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"num_targets\": {\n      \"default\": 0, \n      \"description\": \"Current number of configured targets\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"packages_exported\": {\n      \"default\": 0, \n      \"description\": \"Running total for exported packages\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"packages_imported\": {\n      \"default\": 0, \n      \"description\": \"Running total for imported packages\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"pending_metadata_uploads\": {\n      \"default\": [], \n      \"description\": \"UUIDs for metadata bundles which need to be uploaded\", \n      \"required\": true, \n      \"type\": \"<type 'list'>\"\n    }, \n    \"reports_created\": {\n      \"default\": 0, \n      \"description\": \"Running total for created reports\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"targets_created\": {\n      \"default\": 0, \n      \"description\": \"Running total for targets which have been created\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"user_scim_ids\": {\n      \"default\": [], \n      \"description\": \"Set of salesforce IDs for all users who have logged in via my.nutanix.com\", \n      \"required\": true, \n      \"type\": \"<type 'list'>\"\n    }, \n    \"vm_incarnation\": {\n      \"default\": 0, \n      \"description\": \"VM generation across clones or other disruptive updates to VM hardware. Incremented whenever a change in the VM's BIOS UUID is detected.\", \n      \"required\": true, \n      \"type\": \"<type 'int'>\"\n    }, \n    \"xray_id\": {\n      \"description\": \"Globally unique ID for this X-Ray server\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }\n  }, \n  \"instance\": {\n    \"activation_token\": {\n      \"default\": \"\", \n      \"description\": \"Token used to activate X-Ray\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"created_secs\": {\n      \"description\": \"Epoch timestamp at which bundle was created\", \n      \"required\": true, \n      \"type\": \"<type 'float'>\"\n    }, \n    \"id\": {\n      \"description\": \"Globally unique ID for this metadata bundle\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"instance_created_secs\": {\n      \"description\": \"Epoch timestamp at which instance was created\", \n      \"required\": true, \n      \"type\": \"<type 'float'>\"\n    }, \n    \"instance_id\": {\n      \"description\": \"Globally unique instance ID\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"instance_vars\": {\n      \"default\": {}, \n      \"description\": \"The variables used to create the test instance\", \n      \"required\": true, \n      \"type\": \"<type 'dict'>\"\n    }, \n    \"kind\": {\n      \"choices\": [\n        \"instance\"\n      ], \n      \"description\": \"Kind of metadata, e.g. server, target, instance, etc.\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"name\": {\n      \"description\": \"Name of instance\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"outcome\": {\n      \"description\": \"Information on the outcome of this instance\", \n      \"required\": true, \n      \"schema\": {\n        \"description\": {\n          \"default\": \"\", \n          \"description\": \"Description of the outcome\", \n          \"required\": false, \n          \"type\": \"<type 'basestring'>\"\n        }, \n        \"end_time\": {\n          \"description\": \"Epoch timestamp at which this instance completed execution\", \n          \"required\": false, \n          \"type\": \"<type 'float'>\"\n        }, \n        \"overall\": {\n          \"description\": \"Overall outcome of this instance\", \n          \"required\": true, \n          \"schema\": {\n            \"result\": {\n              \"description\": \"Overall result associated with this outcome\", \n              \"required\": true, \n              \"type\": \"<type 'basestring'>\"\n            }\n          }, \n          \"type\": \"<type 'dict'>\"\n        }, \n        \"progress\": {\n          \"description\": \"Progress for the various stages for this instance\", \n          \"required\": true, \n          \"schema\": {\n            \"children\": {\n              \"default\": [], \n              \"description\": \"Child progress info aggregated by this parent\", \n              \"required\": true, \n              \"type\": \"<type 'list'>\"\n            }, \n            \"description\": {\n              \"default\": \"\", \n              \"description\": \"Detailed progress information\", \n              \"required\": false, \n              \"type\": \"<type 'basestring'>\"\n            }, \n            \"finished\": {\n              \"description\": \"Whether or not the task completed\", \n              \"required\": true, \n              \"type\": \"<type 'bool'>\"\n            }, \n            \"percent\": {\n              \"description\": \"Completion percentage\", \n              \"required\": false, \n              \"type\": \"<type 'float'>\"\n            }, \n            \"weight\": {\n              \"description\": \"Overall weight associated with this progress\", \n              \"required\": false, \n              \"type\": \"<type 'int'>\"\n            }\n          }, \n          \"type\": \"<type 'dict'>\"\n        }, \n        \"start_time\": {\n          \"description\": \"Epoch timestamp at which this instance began execution\", \n          \"required\": false, \n          \"type\": \"<type 'float'>\"\n        }, \n        \"state\": {\n          \"description\": \"Final state of the instance\", \n          \"required\": true, \n          \"type\": \"<type 'basestring'>\"\n        }\n      }, \n      \"type\": \"<type 'dict'>\"\n    }, \n    \"preset\": {\n      \"default\": \"\", \n      \"description\": \"The preset used for this scenario, if applicable\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }, \n    \"targets\": {\n      \"description\": \"Metadata about the targets this instance ran against\", \n      \"required\": true, \n      \"type\": \"<type 'list'>\"\n    }, \n    \"task\": {\n      \"description\": \"Metadata for the task instantiated by this instance\", \n      \"required\": true, \n      \"type\": \"<type 'dict'>\"\n    }, \n    \"xray_id\": {\n      \"default\": \"\", \n      \"description\": \"Globally unique ID for the X-Ray server which executed this task\", \n      \"required\": true, \n      \"type\": \"<type 'basestring'>\"\n    }\n  }\n}",
  "pulse_accepted": true
}
"@ 
  $URL = "https://$($datagen.XRayIP)/xray/v1/eula"

  write-log -message "Using URL $URL"

  try{
    $task = Invoke-RestMethod -Uri $URL -method "post" -body $Json -ContentType 'application/json' -headers $headers;
  } catch {
    sleep 10

    $FName = Get-FunctionName;write-log -message "Error Caught on function $FName" -sev "WARN"

    $task = Invoke-RestMethod -Uri $URL -method "post" -body $Json -ContentType 'application/json' -headers $headers;
  }

  Return $task
} 